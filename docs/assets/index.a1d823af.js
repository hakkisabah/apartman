import{u as X,a as E,r as k,o as c,c as p,w as r,V as Z,b as a,d as ee,e as l,t as _,f,g as te,h as b,i as h,j as w,k as se,l as ae,m,n as $,p as A,q as I,s as B,v as N,x as y,y as D,F as S,z as U,A as V,B as L,C,D as ne,E as x,G as P,H as j,I as Y,J as ie,K as re,L as oe,M as H,N as T,O as le,P as q,Q as de,R as ue,S as ce,T as me,U as he,W as fe,X as _e,Y as pe,Z as ge,_ as ye,$ as ve,a0 as ke}from"./vendor.6541db6b.js";const be=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))t(d);new MutationObserver(d=>{for(const o of d)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function n(d){const o={};return d.integrity&&(o.integrity=d.integrity),d.referrerpolicy&&(o.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?o.credentials="include":d.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(d){if(d.ep)return;d.ep=!0;const o=n(d);fetch(d.href,o)}};be();var v=(s,e)=>{const n=s.__vccOpts||s;for(const[t,d]of e)n[t]=d;return n};const we={name:"App",setup(){const s=X(),e=E();return{apartmanAdi:"TEST",store:e,route:s}},methods:{isAdmin(){this.store.getters.isAdmin&&this.route.path==="/"?this.$router.push("/admin"):this.store.getters.isAdmin&&this.route.path==="/admin"?this.$router.push("/"):this.$router.push("/login")},logout(){this.store.commit("setAdmin",!1),this.store.commit("setLogin",!1),this.$cookies.remove("auth"),this.$router.push("/"),this.route.path==="/"&&window.location.reload()}}},xe=h("\xC7\u0131k\u0131\u015F ");function Ve(s,e,n,t,d,o){const i=k("router-view");return c(),p(Z,{id:"inspire"},{default:r(()=>[a(ee,{app:""},{default:r(()=>[a(f,{class:"col-md-12 text-center"},{default:r(()=>[l("h3",null,_(t.apartmanAdi)+" Apartman\u0131",1)]),_:1}),a(te),a(f,null,{default:r(()=>[t.store.getters.isAdmin&&t.store.getters.isLogin?(c(),p(b,{key:0,color:"primary",onClick:e[0]||(e[0]=u=>o.isAdmin())},{default:r(()=>[h(_(t.store.getters.isAdmin&&t.route.path==="/"?"Y\xF6netim Paneli":"Anasayfa"),1)]),_:1})):w("",!0)]),_:1}),a(f,null,{default:r(()=>[t.store.getters.isLogin?(c(),p(b,{key:0,color:"error",class:"justify-end",onClick:o.logout},{default:r(()=>[xe]),_:1},8,["onClick"])):w("",!0)]),_:1})]),_:1}),a(se,null,{default:r(()=>[a(i)]),_:1})]),_:1})}var Le=v(we,[["render",Ve]]);var Ce=ae();const Se="modulepreload",M={},Te="/",$e=function(e,n){return!n||n.length===0?e():Promise.all(n.map(t=>{if(t=`${Te}${t}`,t in M)return;M[t]=!0;const d=t.endsWith(".css"),o=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${o}`))return;const i=document.createElement("link");if(i.rel=d?"stylesheet":Se,d||(i.as="script",i.crossOrigin=""),i.href=t,document.head.appendChild(i),d)return new Promise((u,g)=>{i.addEventListener("load",u),i.addEventListener("error",g)})})).then(()=>e())};async function Ae(){(await $e(()=>import("./webfontloader.f5e2b0ed.js").then(function(e){return e.w}),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const Ie={name:"NewInvoice",setup(){const s=m(!1),e=m(null),n=m(null),t=m("otomat"),d=m(new Date().getMonth()+1),o=m(new Date().getFullYear()),i=m(),u=$(()=>n.value&&d.value&&o.value&&i.value);return{sampleFile:n,giderTuru:t,donem:d,sene:o,tutar:i,tur:["otomat","diger"],error:e,overlay:s,formisOk:u}},methods:{setImage(s){this.sampleFile=s.target.files[0]},async submit(){if(!this.formisOk){this.error="T\xFCm alanlar\u0131 doldurman\u0131z gerekli.",window.scrollTo(0,0),setTimeout(()=>{this.error=null},3e3);return}this.overlay=!0;const s={Authorization:`Bearer ${this.$cookies.get("auth")}`},e=new FormData;e.append("file",this.sampleFile,"sampleFile"),e.append("giderTuru",this.giderTuru),e.append("donem",this.donem),e.append("sene",this.sene),e.append("tutar",this.tutar),this.$appAxios.post("https://wxzc83m7k0.execute-api.eu-central-1.amazonaws.com/api/aptapi/additem",e,{headers:s}).then(()=>{this.overlay=!1,this.$refs.uploadfileinput.click(),this.donem=new Date().getMonth()+1,this.sene=new Date().getFullYear(),this.tutar=null,alert("Ba\u015Far\u0131l\u0131"),window.scrollTo(0,0)}).catch(n=>{this.overlay=!1,this.error=n,alert("Hata")})},setTur(s){this.giderTuru=s.target.value}}},De=l("h2",null,"Hata",-1),Pe={class:"err"},ze=l("label",{for:"standard-select",class:"text-center"},"T\xFCr se\xE7",-1),Fe={class:"select mt-1",style:{"--select-border":"gray","--select-focus":"gray"}},Re=["value"],Oe=l("span",{class:"focus"},null,-1),Ee=l("h3",null,"Y\xFCklenecek Dosyay\u0131 Se\xE7iniz",-1),Be=l("h3",null,"D\xF6nem(Ay)",-1),Ne=l("h3",null,"Sene",-1),Ue=l("h3",null,"Toplam Tutar",-1),je=h(" Kaydet ");function Ye(s,e,n,t,d,o){return c(),p(L,null,{default:r(()=>[a(I,{"model-value":t.overlay,class:"align-center justify-center"},{default:r(()=>[a(A,{indeterminate:"",size:"64"})]),_:1},8,["model-value"]),t.error?(c(),p(f,{key:0},{default:r(()=>[De,l("p",Pe,_(t.error),1)]),_:1})):w("",!0),a(f,{cols:"12"},{default:r(()=>[ze,l("div",Fe,[B(l("select",{name:"tur",onChange:e[0]||(e[0]=(...i)=>o.setTur&&o.setTur(...i)),"onUpdate:modelValue":e[1]||(e[1]=i=>t.giderTuru=i),id:"standard-select"},[(c(!0),y(S,null,D(t.tur,i=>(c(),y("option",{value:i},_(i),9,Re))),256))],544),[[N,t.giderTuru]]),Oe])]),_:1}),a(f,{cols:"12"},{default:r(()=>[Ee,a(U,{ref:"uploadfileinput",class:"mt-1",accept:"application/pdf",placeholder:"Y\xFCklenecek dosyay\u0131 se\xE7in","prepend-icon":"mdi-camera",label:"Dosya",onChange:o.setImage},null,8,["onChange"])]),_:1}),a(f,{cols:"12"},{default:r(()=>[Be,a(V,{modelValue:t.donem,"onUpdate:modelValue":e[2]||(e[2]=i=>t.donem=i),"hide-details":"","single-line":"",type:"number"},null,8,["modelValue"])]),_:1}),a(f,{cols:"12"},{default:r(()=>[Ne,a(V,{modelValue:t.sene,"onUpdate:modelValue":e[3]||(e[3]=i=>t.sene=i),"hide-details":"","single-line":"",type:"number"},null,8,["modelValue"])]),_:1}),a(f,{cols:"12"},{default:r(()=>[Ue,a(V,{modelValue:t.tutar,"onUpdate:modelValue":e[4]||(e[4]=i=>t.tutar=i),"hide-details":"","single-line":"",type:"number"},null,8,["modelValue"])]),_:1}),a(f,{cols:"12"},{default:r(()=>[a(b,{color:"blue darken-1",text:"",onClick:o.submit},{default:r(()=>[je]),_:1},8,["onClick"])]),_:1})]),_:1})}var He=v(Ie,[["render",Ye]]);const qe={name:"AdminMenu",methods:{changePage(s){this.$emit("changePage",s)}}},Me=l("span",{class:"text-h5"},"\u0130\u015Flemler",-1),Ke={class:"d-flex justify-space-around"},Ge=h(" Yeni Kay\u0131t "),We=h(" D\xFCzenleme ");function Je(s,e,n,t,d,o){return c(),p(L,null,{default:r(()=>[a(f,{cols:"12",sm:"6","offset-sm":"3",class:"text-center"},{default:r(()=>[Me,a(C,{class:"pt-5 pb-5"},{default:r(()=>[l("div",Ke,[a(b,{color:"success",plain:"",onClick:e[0]||(e[0]=i=>o.changePage("NewInvoice"))},{default:r(()=>[Ge]),_:1}),a(b,{color:"grey",plain:"",onClick:e[1]||(e[1]=i=>o.changePage("EditInvoice"))},{default:r(()=>[We]),_:1})])]),_:1})]),_:1})]),_:1})}var Qe=v(qe,[["render",Je]]);const Xe={name:"Confirm",props:{dialog:{type:Boolean,default:!1},item:{type:Object,default:{}}},methods:{deleteConfirmation(s){this.$emit("delete-confirmation",s)}}},Ze=h(" Silme \u0130\u015Flemi Onay\u0131 "),et=h(" Hay\u0131r "),tt=h(" Evet ");function st(s,e,n,t,d,o){return c(),p(L,{justify:"center"},{default:r(()=>[a(Y,{modelValue:n.dialog,"onUpdate:modelValue":e[2]||(e[2]=i=>n.dialog=i)},{default:r(()=>[a(C,null,{default:r(()=>[a(ne,{class:"text-h5"},{default:r(()=>[Ze]),_:1}),a(x,{class:"text-center"},{default:r(()=>[h(_(n.item.sene)+" senesi ve "+_(n.item.donem)+". d\xF6nemine ait t\xFCm kay\u0131tlar ve ilgili dosya silinecek ",1)]),_:1}),a(P,null,{default:r(()=>[a(j),a(b,{color:"green darken-1",text:"",onClick:e[0]||(e[0]=i=>o.deleteConfirmation(!1))},{default:r(()=>[et]),_:1}),a(b,{color:"error",text:"",onClick:e[1]||(e[1]=i=>o.deleteConfirmation(!0))},{default:r(()=>[tt]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var at=v(Xe,[["render",st]]);const nt={name:"EditDialog",components:{Confirm:at},props:{item:{type:Object,required:!0},dialog:{type:Boolean,required:!0,default:!1}},emits:["isDialogOpen"],setup(s){const e=m(!1),n=m(!1),t=m(+s.item.odeme>0),d=m(!0),o=m(!0),i=m(""),u=["otomat","diger"],g=`${s.item.giderTuru}-${s.item.donem}-${s.item.sene}.pdf`.toLowerCase();return ie(()=>{s.dialog||(d.value=!0)}),{tur:u,error:i,currentItemFileName:g,fileLocked:d,odemeDurum:t,fileLockedBefore:o,overlay:n,deleteConfirmation:e}},methods:{donemSil(s){if(this.deleteConfirmation=!1,s){this.overlay=!0;const e={Authorization:`Bearer ${this.$cookies.get("auth")}`},n=this;this.$appAxios.post("https://wxzc83m7k0.execute-api.eu-central-1.amazonaws.com/api/aptapi/deleteitem",{invoiceId:this.item.invoiceId},{headers:e}).then(()=>{this.overlay=!1,alert("Ba\u015Far\u0131l\u0131"),setTimeout(()=>{n.$emit("isDialogOpen",!1)},500)}).catch(t=>{this.overlay=!1,this.error=t,alert("Hata"),window.scrollTo(0,0)})}},updateItem(){this.overlay=!0;const s={Authorization:`Bearer ${this.$cookies.get("auth")}`},e=this,n=new FormData;this.item.sampleFile?n.append("file",this.item.sampleFile,"sampleFile"):n.append("sampleFile",""),n.append("invoiceId",this.item.invoiceId),n.append("giderTuru",this.item.giderTuru),n.append("donem",this.item.donem),n.append("sene",this.item.sene),n.append("daire",this.item.daire),n.append("tutar",this.item.tutar),n.append("odeme",this.odemeDurum?1:0),this.$appAxios.post("https://wxzc83m7k0.execute-api.eu-central-1.amazonaws.com/api/aptapi/updateitem",n,{headers:s}).then(()=>{this.overlay=!1,alert("Ba\u015Far\u0131l\u0131"),setTimeout(()=>{e.$emit("isDialogOpen",!1)},500)}).catch(t=>{this.overlay=!1,this.error=t,alert("Hata"),window.scrollTo(0,0)})},openFileInput(){this.fileLockedBefore=!1},setImage(s){this.item.sampleFile=s.target.files[0],this.fileLocked=!1},setTur(s){this.item.giderTuru=s.target.value}}},it=l("hr",null,null,-1),rt=l("h2",null,"Hata",-1),ot=l("label",{for:"standard-select",class:"text-center"},"T\xFCr se\xE7",-1),lt={class:"select mt-1",style:{"--select-border":"gray","--select-focus":"gray"}},dt=["disabled"],ut=["value"],ct=l("span",{class:"focus"},null,-1),mt={key:0},ht=h("Y\xFCkleme yapmak i\xE7in "),ft=l("h4",null,"NOT: Y\xFCkleme yapmadan donem, sene ve t\xFCr bilgileri a\xE7\u0131lmaz.",-1),_t={key:1},pt=l("h3",null,"Y\xFCklenecek Dosyay\u0131 Se\xE7iniz",-1),gt=l("h3",null,"D\xF6nem(Ay)",-1),yt=l("h3",null,"Sene",-1),vt=l("h3",null,"Toplam Tutar",-1),kt=h(" Sil "),bt=h(" Kapat "),wt=h(" Kaydet ");function xt(s,e,n,t,d,o){const i=k("Confirm");return c(),y(S,null,[a(I,{"model-value":t.overlay,class:"align-center justify-center"},{default:r(()=>[a(A,{indeterminate:"",size:"64"})]),_:1},8,["model-value"]),l("h2",null,'"'+_(n.item.daire)+'" numaral\u0131 daireye i\u015Flem yapmaktas\u0131n\u0131z',1),it,t.error?(c(),p(f,{key:0},{default:r(()=>[rt,l("p",null,_(t.error),1)]),_:1})):w("",!0),a(C,{class:"text-center"},{default:r(()=>[a(f,{cols:"12",class:"mt-3"},{default:r(()=>[ot,l("div",lt,[B(l("select",{name:"tur",onChange:e[0]||(e[0]=(...u)=>o.setTur&&o.setTur(...u)),"onUpdate:modelValue":e[1]||(e[1]=u=>n.item.giderTuru=u),id:"standard-select",disabled:t.fileLocked},[(c(!0),y(S,null,D(t.tur,u=>(c(),y("option",{value:u},_(u),9,ut))),256))],40,dt),[[N,n.item.giderTuru]]),ct])]),_:1}),a(f,{cols:"12"},{default:r(()=>[t.fileLockedBefore?(c(),y("div",mt,[l("h4",null,'\u015Eu an "'+_(t.currentItemFileName)+'" isimli dosya y\xFCkl\xFC',1),l("h4",null,[ht,l("strong",{onClick:e[2]||(e[2]=u=>o.openFileInput()),style:{cursor:"pointer"}},"t\u0131klay\u0131n\u0131z")]),ft])):(c(),y("div",_t,[pt,a(U,{class:"mt-1",accept:"application/pdf",placeholder:"Y\xFCklenecek dosyay\u0131 se\xE7in","prepend-icon":"mdi-camera",label:"Dosya",onChange:o.setImage,disabled:t.fileLockedBefore},null,8,["onChange","disabled"])]))]),_:1}),a(f,{cols:"12"},{default:r(()=>[gt,a(V,{modelValue:n.item.donem,"onUpdate:modelValue":e[3]||(e[3]=u=>n.item.donem=u),"hide-details":"","single-line":"",type:"number",disabled:t.fileLocked},null,8,["modelValue","disabled"])]),_:1}),a(f,{cols:"12"},{default:r(()=>[yt,a(V,{modelValue:n.item.sene,"onUpdate:modelValue":e[4]||(e[4]=u=>n.item.sene=u),"hide-details":"","single-line":"",type:"number",disabled:t.fileLocked},null,8,["modelValue","disabled"])]),_:1}),a(f,{cols:"12"},{default:r(()=>[vt,a(V,{modelValue:n.item.tutar,"onUpdate:modelValue":e[5]||(e[5]=u=>n.item.tutar=u),"hide-details":"","single-line":"",type:"number"},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",sm:"12",md:"12"},{default:r(()=>[a(L,null,{default:r(()=>[a(P,null,{default:r(()=>[a(f,{cols:"1",class:"mx-auto"},{default:r(()=>[a(re,{modelValue:t.odemeDurum,"onUpdate:modelValue":e[6]||(e[6]=u=>t.odemeDurum=u),label:`\xD6deme : ${t.odemeDurum?"\xD6denmi\u015F":"\xD6denmemi\u015F"}`},null,8,["modelValue","label"])]),_:1}),a(j),a(f,{cols:"4",sm:"4",md:"4"},{default:r(()=>[a(b,{class:"mb-3",color:"error",text:"",onClick:e[7]||(e[7]=u=>t.deleteConfirmation=!0)},{default:r(()=>[kt]),_:1}),a(b,{class:"mb-3",color:"blue-darken-1",text:"",onClick:e[8]||(e[8]=u=>s.$emit("isDialogOpen",!1))},{default:r(()=>[bt]),_:1}),a(b,{class:"mb-3",color:"success",text:"",onClick:e[9]||(e[9]=u=>o.updateItem())},{default:r(()=>[wt]),_:1})]),_:1})]),_:1}),t.deleteConfirmation?(c(),p(i,{key:0,onDeleteConfirmation:o.donemSil,item:n.item,dialog:t.deleteConfirmation},null,8,["onDeleteConfirmation","item","dialog"])):w("",!0)]),_:1})]),_:1})]),_:1})],64)}var Vt=v(nt,[["render",xt]]);const Lt={name:"Search",props:{currentList:{type:Array,required:!0},unpaidList:{type:Array,required:!0}},setup(s,e){const n=m(""),t=m([]),d=m("daire"),o=m(!1);return $(()=>s.currentList.filter(i=>!i.odeme)),oe(d,()=>{n.value="",t.value=[],e.emit("currentSearch",""),e.emit("searchResult",[])}),{currentSearch:n,searchResult:t,currentSearchType:d,selectedIsPaid:o}},methods:{emitSide(){this.$emit("selectedIsPaid",this.selectedIsPaid),this.$emit("currentSearch",""),this.$emit("searchResult",[]),this.currentSearch=""},onChange(){if(this.searchResult=[],this.currentSearchType==="all"){for(let s=0;s<this.currentList.length;s++)for(let e in this.currentList[s])e!=="invoiceId"&&this.currentList[s][e].toString().indexOf(this.currentSearch.toLowerCase())!==-1&&this.searchResult.push(this.currentList[s]);this.searchResult=Array.from(new Set(this.searchResult))}else this.currentSearchType==="sene"?this.searchResult=this.currentList.filter(s=>s.sene.toString().toLowerCase().includes(this.currentSearch.toLowerCase())):this.currentSearchType==="daire"?this.searchResult=this.currentList.filter(s=>s.daire.toString().toLowerCase().includes(this.currentSearch.toLowerCase())):this.currentSearchType==="giderTuru"?this.searchResult=this.currentList.filter(s=>s.giderTuru.toString().toLowerCase().includes(this.currentSearch.toLowerCase())):this.currentSearchType==="tutar"&&(this.searchResult=this.currentList.filter(s=>s.tutar.toString().toLowerCase().includes(this.currentSearch.toString().toLowerCase())));this.$emit("currentSearch",this.currentSearch),this.$emit("searchResult",this.searchResult)}}},Ct=h("Not : Fatura g\xF6r\xFCnt\xFClemeyi de\u011Fi\u015Ftirebilmek i\xE7in ilk \xF6nce arama kutusunun i\xE7eri\u011Fini bo\u015Falt\u0131n\u0131z "),St=h("Arama");function Tt(s,e,n,t,d,o){return c(),p(L,null,{default:r(()=>[a(C,{class:"mx-auto mb-3","max-width":"270","max-height":"360"},{default:r(()=>[a(f,{cols:"12",sm:"12",md:"12"},{default:r(()=>[a(L,{class:"text-center"},{default:r(()=>[a(H,{modelValue:t.currentSearchType,"onUpdate:modelValue":e[0]||(e[0]=i=>t.currentSearchType=i),column:""},{default:r(()=>[a(T,{label:"Sene",color:"red",value:"sene"}),a(T,{label:"Daire",color:"blue",value:"daire"})]),_:1},8,["modelValue"]),a(H,{modelValue:t.currentSearchType,"onUpdate:modelValue":e[1]||(e[1]=i=>t.currentSearchType=i),column:""},{default:r(()=>[a(T,{label:"Gider T\xFCr\xFC",color:"grey",value:"giderTuru"}),a(T,{label:"Tutar",color:"green",value:"tutar"})]),_:1},8,["modelValue"]),a(T,{label:"hepsi",color:"success",modelValue:t.currentSearchType,"onUpdate:modelValue":e[2]||(e[2]=i=>t.currentSearchType=i),value:"all"},null,8,["modelValue"])]),_:1})]),_:1}),a(x,null,{default:r(()=>[h("Arama t\xFCr\xFC olarak "+_(t.currentSearchType==="all"?"hepsi":t.currentSearchType)+" se\xE7ili spesifik arama i\xE7in se\xE7im yapabilirsiniz",1)]),_:1})]),_:1}),a(C,{class:"mx-auto mb-3","max-width":"270","max-height":"360"},{default:r(()=>[a(x,{class:"text-center"},{default:r(()=>[h(_(n.unpaidList.length>0?`\u015Eu an toplam ${n.unpaidList.length} adet \xF6denmemi\u015F ortak gider bulunmaktad\u0131r.`:"\xD6denmemi\u015F ortak gider bulunmamaktad\u0131r."),1)]),_:1}),a(x,{class:"text-center"},{default:r(()=>[Ct]),_:1})]),_:1}),a(C,{class:"mx-auto mb-3","max-width":"270","max-height":"360"},{default:r(()=>[a(x,{class:"mb-2"},{default:r(()=>[St]),_:1}),a(L,{justify:"center"},{default:r(()=>[a(f,{cols:"12",sm:"12",md:"12"},{default:r(()=>[a(V,{modelValue:t.currentSearch,"onUpdate:modelValue":e[3]||(e[3]=i=>t.currentSearch=i),label:"Arama yap",onKeyup:e[4]||(e[4]=i=>o.onChange())},null,8,["modelValue"])]),_:1}),a(f,{cols:"8",sm:"8",md:"8"},{default:r(()=>[a(le,{onChange:e[5]||(e[5]=i=>o.emitSide()),modelValue:t.selectedIsPaid,"onUpdate:modelValue":e[6]||(e[6]=i=>t.selectedIsPaid=i),label:`${t.selectedIsPaid?"\xD6denmi\u015F":"\xD6denmemi\u015F"} Fatura`,disabled:t.currentSearch.length>0},null,8,["modelValue","label","disabled"])]),_:1}),a(x,{class:"text-center"},{default:r(()=>[h("\u015Eu an "+_(`${t.selectedIsPaid?"\xD6denmi\u015F":"\xD6denmemi\u015F"} Faturalar\u0131`)+" g\xF6r\xFCnt\xFCl\xFCyorsunuz ",1)]),_:1})]),_:1})]),_:1})]),_:1})}var K=v(Lt,[["render",Tt]]);const $t={name:"Table",props:{desserts:{type:Array,required:!0},isPaid:{type:Boolean,required:!0}},setup(s){return{whichList:$(()=>`${s.isPaid?"\xD6denmi\u015F":"\xD6denmemi\u015F"} listesi bo\u015F, de\u011Fi\u015Ftirmek i\xE7in ge\xE7i\u015F tu\u015Funu kullan\u0131n\u0131z.`)}},methods:{selectInvoice(s,e){e.target.className.split(" ").includes("mdi-download")||this.$emit("edit",s)},getItemFileLink(s){const e=this.desserts.find(n=>n.invoiceId===s);return`https://testapartman.s3.eu-central-1.amazonaws.com/test/uploads/${e.giderTuru}-${e.donem}-${e.sene}.pdf`.toLowerCase()}}},At=l("thead",null,[l("tr",null,[l("th",{class:"text-center"},[l("h3",null,"D\xF6nem")]),l("th",{class:"text-center"},[l("h3",null,"Sene")]),l("th",{class:"text-center"},[l("h3",null,"Daire")]),l("th",{class:"text-center"},[l("h3",null,"Gider T\xFCr\xFC")]),l("th",{class:"text-center"},[l("h3",null,"Tutar")])])],-1),It=["onClick"],Dt={class:"text-center"},Pt=["href"],zt=h(" mdi-download "),Ft={class:"text-center"},Rt={class:"text-center"},Ot={class:"text-center"},Et={class:"text-center"},Bt={key:1,class:"text-center mt-5"};function Nt(s,e,n,t,d,o){return c(),y("div",null,[n.desserts.length>0?(c(),p(de,{key:0,"fixed-header":"",height:"300x"},{default:r(()=>[At,l("tbody",null,[(c(!0),y(S,null,D(n.desserts,i=>(c(),y("tr",{key:i.invoiceId,onClick:u=>o.selectInvoice(i,u),style:{cursor:"pointer"}},[l("td",Dt,[h(_(i.donem)+" ",1),l("a",{class:"text-decoration-none",href:o.getItemFileLink(i.invoiceId)},[a(q,{small:"",ref_for:!0,ref:"download"},{default:r(()=>[zt]),_:1},512)],8,Pt)]),l("td",Ft,_(i.sene),1),l("td",Rt,_(i.daire),1),l("td",Ot,_(i.giderTuru),1),l("td",Et,[h(_(i.tutar)+" ",1),a(q,{small:"",color:+i.odeme>0?"teal":"error"},{default:r(()=>[h(_(+i.odeme>0?"mdi-check":"mdi-alert-circle"),1)]),_:2},1032,["color"])])],8,It))),128))])]),_:1})):(c(),y("div",Bt,[l("h3",null,_(t.whichList),1)]))])}var Ut=v($t,[["render",Nt]]);const jt={name:"List",components:{Table:Ut,Search:K},emits:["edit","selectedIsPaid","currentSearch","searchResult"],setup(){const s=m(!0),e=m(""),n=m([]),t=m(!1),d=m("all"),o=m([]),i=m([]),u=$(()=>t.value?i.value:o.value);return{odenmemis:o,odenmis:i,currentSearch:e,searchResult:n,currentSearchType:d,currentList:u,selectedIsPaid:t,overlay:s}},async mounted(){const s={Authorization:`Bearer ${this.$cookies.get("auth")}`};await this.$appAxios.get("getitems",{headers:s}).then(e=>{this.overlay=!1,this.odenmemis=e.data.filter(n=>+n.odeme<1),this.odenmis=e.data.filter(n=>+n.odeme>0)})}},Yt={class:"mt-5 mb-5"};function Ht(s,e,n,t,d,o){const i=k("Search"),u=k("Table");return c(),y(S,null,[l("div",Yt,[a(I,{"model-value":t.overlay,class:"align-center justify-center"},{default:r(()=>[a(A,{indeterminate:"",size:"64"})]),_:1},8,["model-value"]),a(i,{onSelectedIsPaid:e[0]||(e[0]=g=>t.selectedIsPaid=g),"current-list":t.currentList,unpaidList:t.odenmemis,onCurrentSearch:e[1]||(e[1]=g=>t.currentSearch=g),onSearchResult:e[2]||(e[2]=g=>t.searchResult=g)},null,8,["current-list","unpaidList"])]),a(u,{onEdit:e[3]||(e[3]=g=>s.$emit("edit",g)),desserts:t.currentSearch.length>0?t.searchResult:t.currentList,"is-paid":t.selectedIsPaid},null,8,["desserts","is-paid"])],64)}var G=v(jt,[["render",Ht]]);const qt={name:"EditInvoice",components:{Search:K,EditDialog:Vt,List:G},emits:["edit","isDialogOpen"],setup(){const s=m(!1),e=m({});return{isDialogOpen:s,selectedItem:e}},methods:{dialog(s){this.selectedItem=s,this.isDialogOpen=!0}}};function Mt(s,e,n,t,d,o){const i=k("EditDialog"),u=k("List");return c(),y(S,null,[t.isDialogOpen?(c(),p(i,{key:0,onIsDialogOpen:e[0]||(e[0]=g=>t.isDialogOpen=g),dialog:t.isDialogOpen,item:t.selectedItem},null,8,["dialog","item"])):w("",!0),t.isDialogOpen?w("",!0):(c(),p(u,{key:1,onEdit:o.dialog},null,8,["onEdit"]))],64)}var Kt=v(qt,[["render",Mt]]);const Gt={name:"Admin",components:{EditInvoice:Kt,AdminMenu:Qe,NewInvoice:He},emits:["changePage"],setup(){return{currentPage:m("NewInvoice")}},methods:{setPage(s){this.currentPage=s}}},Wt={"data-app":""},Jt={class:"mt-5"};function Qt(s,e,n,t,d,o){const i=k("AdminMenu"),u=k("NewInvoice"),g=k("EditInvoice");return c(),y("div",Wt,[l("div",Jt,[a(i,{onChangePage:o.setPage},null,8,["onChangePage"])]),a(ue,{class:"text-center"},{default:r(()=>[t.currentPage==="NewInvoice"?(c(),p(u,{key:0,onAfterUpload:e[0]||(e[0]=Q=>t.currentPage=Q)})):t.currentPage==="EditInvoice"?(c(),p(g,{key:1})):w("",!0)]),_:1})])}var Xt=v(Gt,[["render",Qt]]);const Zt={name:"Home",components:{List:G}};function es(s,e,n,t,d,o){const i=k("List");return c(),y("div",null,[a(i)])}var ts=v(Zt,[["render",es]]);const ss={name:"LoginPopup",props:{dialog:{type:Boolean,default:!1}},setup(){const s=m(!1),e=ce(),n=E(),t=m(""),d=m("");return n.getters.isLogin&&(n.getters.isAdmin?e.push("/admin"):e.push("/")),{password:t,error:d,store:n,disabled:s}},methods:{login(){this.disabled=!0,this.$appAxios.post("user/login",{password:this.password}).then(s=>{s.data.status==="success"?(this.disabled=!1,this.$cookies.set("auth",s.data.token),this.store.commit("setAdmin",s.data.user==="admin"),this.store.commit("setLogin",!0),this.$emit("dialog-callback",!1),this.$router.push(s.data.user==="admin"?"/admin":"/")):(this.disabled=!1,this.error="\u015Eifre yanl\u0131\u015F")}).catch(s=>{this.disabled=!1,this.error=s})}}},as=l("h2",null,"Hata",-1),ns=h("\u015Eifre : Kap\u0131 otomat\u0131 ile ayn\u0131d\u0131r."),is=h("ya da"),rs=h("Y\xF6netici \u015Fifrenizi giriniz"),os=h(" Giri\u015F ");function ls(s,e,n,t,d,o){return c(),p(L,{justify:"space-around"},{default:r(()=>[a(f,{cols:"auto"},{default:r(()=>[a(Y,{modelValue:n.dialog,"onUpdate:modelValue":e[3]||(e[3]=i=>n.dialog=i),transition:"dialog-bottom-transition"},{default:r(()=>[a(C,null,{default:r(()=>[t.error?(c(),p(f,{key:0},{default:r(()=>[as,l("p",null,_(t.error),1)]),_:1})):w("",!0),a(x,{class:"text-center"},{default:r(()=>[ns]),_:1}),a(x,{class:"text-center"},{default:r(()=>[is]),_:1}),a(x,{class:"text-center"},{default:r(()=>[rs]),_:1}),a(me,{onSubmit:e[2]||(e[2]=he(i=>o.login(),["prevent"])),ref:"form"},{default:r(()=>[a(V,{modelValue:t.password,"onUpdate:modelValue":e[0]||(e[0]=i=>t.password=i),label:"\u015Eifre giriniz",required:""},null,8,["modelValue"]),a(P,{class:"justify-end"},{default:r(()=>[a(b,{type:"submit",color:"success",onClick:e[1]||(e[1]=i=>o.login()),disabled:t.disabled},{default:r(()=>[os]),_:1},8,["disabled"])]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}var ds=v(ss,[["render",ls]]);const us={name:"Login",components:{LoginPopup:ds},emits:["dialogCallback","dialog"],setup(){return{dialog:m(!0)}}};function cs(s,e,n,t,d,o){const i=k("LoginPopup");return c(),p(i,{onDialogCallback:e[0]||(e[0]=u=>t.dialog=u),dialog:t.dialog},null,8,["dialog"])}var ms=v(us,[["render",cs]]);const z=fe.create({baseURL:"https://wxzc83m7k0.execute-api.eu-central-1.amazonaws.com/api/aptapi/"}),F=_e({state:{isLogin:!1,isAdmin:!1},mutations:{setAdmin(s,e){s.isAdmin=e},setLogin(s,e){s.isLogin=e}},getters:{isAdmin:s=>s.isAdmin,isLogin:s=>s.isLogin}}),hs=[{path:"/",component:ts,beforeEnter:async(s,e,n)=>{!await J("user")&&s.path!=="/login"?n("/login"):n()}},{path:"/admin",component:Xt,beforeEnter:async(s,e,n)=>{!await J("admin")&&s.path!=="/login"?n("/login"):n()}},{path:"/login",component:ms}],{cookies:R}=pe(),W={},fs=ge({routes:hs,history:ye()}),J=async s=>{const e=R.get("auth");if(e){W.Authorization=`Bearer ${e}`;try{const{data:n}=await z.post("user/verifytoken",{user:s},{headers:W});return n.status==="success"?(F.commit("setAdmin",n.user==="admin"),F.commit("setLogin",!0),!0):(R.remove("auth"),!1)}catch{return R.remove("auth"),!1}}else return!1};Ae();const O=ve(Le).use(Ce).use(fs).use(ke).use(F);O.provide("$appAxios",z);O.config.globalProperties.$appAxios=z;O.mount("#app");
